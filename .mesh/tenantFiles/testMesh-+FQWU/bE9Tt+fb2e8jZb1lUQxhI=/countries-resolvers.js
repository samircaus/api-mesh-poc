
const currencySymbols={USD:'$',EUR:'€',GBP:'£',JPY:'¥',CNY:'¥',INR:'₹',AUD:'A$',CAD:'C$',CHF:'Fr',SEK:'kr',NOK:'kr',DKK:'kr',RUB:'₽',BRL:'R$',MXN:'$',ZAR:'R',KRW:'₩',TRY:'₺',AED:'د.إ',SAR:'﷼',PLN:'zł',THB:'฿',IDR:'Rp',MYR:'RM',PHP:'₱',SGD:'S$',NZD:'NZ$',HKD:'HK$',ILS:'₪',EGP:'£',NGN:'₦',ARS:'$',CLP:'$',COP:'$',PEN:'S/',VND:'₫',BDT:'৳',PKR:'₨',UAH:'₴',CZK:'Kč',HUF:'Ft',RON:'lei',};module.exports={resolvers:{Country:{displayName:{selectionSet:`{name emoji}`,resolve:(root,args,context,info)=>{return`${root.emoji}${root.name}`;},},fullDescription:{selectionSet:`{name capital currency continent{name}languages{name}}`,resolve:(root,args,context,info)=>{const capital=root.capital||'N/A';const currency=root.currency||'N/A';const continent=root.continent?.name||'Unknown';let languageText='N/A';if(root.languages&&root.languages.length>0){const languageNames=root.languages.map(lang=>lang.name).filter(Boolean);if(languageNames.length===1){languageText=languageNames[0];}else if(languageNames.length>1){const lastLang=languageNames.pop();languageText=languageNames.join(', ')+' and '+lastLang;}}
return`${root.name}is in ${continent},capital:${capital},currency:${currency}.Official language${root.languages?.length>1?'s are':' is'}${languageText}`;},},hasCapital:{selectionSet:`{capital}`,resolve:(root,args,context,info)=>{return!!root.capital;},},currencySign:{selectionSet:`{currency}`,resolve:(root,args,context,info)=>{if(!root.currency)return null;const currencies=root.currency.split(',').map(c=>c.trim());const symbols=currencies.map(code=>currencySymbols[code]||code);const uniqueSymbols=[...new Set(symbols)];return uniqueSymbols.join(',');},},description:{selectionSet:`{code}`,resolve:(root,args,context,info)=>{if(!root.code)return null;context.logger.log('Fetching description from CountryDetails');return globalThis.fetch('https://sandbox.samircaus.workers.dev/graphql',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({query:`{country(code:"${root.code}"){description}}`,})}).then(response=>{if(response&&response.ok){return response.json();}
return null;}).then(data=>{if(data?.errors){context.logger.error('GraphQL errors received');return null;}
return data?.data?.country?.description||null;}).catch(error=>{context.logger.error('Failed to fetch description');return null;});},},},},};